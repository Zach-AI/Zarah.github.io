<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Achu!‚ô•Ô∏è </title>

  <style>
    * { box-sizing: border-box; }
    html, body { margin: 0; height: 100%; }
    body {
      font-family: Arial, sans-serif;
      background: #0f172a;
      color: #e5e7eb;
      overflow-x: hidden;
    }

    .container {
      min-height: 100vh;
      display: grid;
      place-items: center;
      padding: 24px;
      text-align: center;
      gap: 18px;
    }

    /* üîπ ONLY CHANGE: bigger first-screen image box */
    #media-box {
      width: min(900px, 94vw);
      background: #000;
      border-radius: 18px;
      overflow: visible;
      box-shadow: 0 20px 40px rgba(0,0,0,0.45);
    }

    /* unchanged */
    #media-box.big {
      width: min(1100px, 96vw);
      /* cap height so the question + buttons stay on one screen */
      
    }

    /* üîπ ONLY CHANGE: fill the box like your sample image */
    #banner {
      width: 100%;
      height: auto;         /* üîπ key: don't force 100% height */
           /* üîπ ensures everything fits in one screen */
      object-fit: contain;  /* üîπ never crop */
      display: block;
      margin: 0 auto;
      background: transparent;
    }

    #collage {
      width: 100%;
      height: 100%;
      display: none;
      padding: 12px;
      gap: 12px;
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      grid-template-rows: repeat(2, 1fr);
    }

    #collage img {
      width: 100%;
      height: 100%;
      object-fit: contain;
      border-radius: 12px;
      transition: opacity 0.4s ease;
    }

    .question {
      font-size: 28px;
      margin: 0;
    }

    

    /* üîπ NEW: question appears AFTER the image loads */
    #question {
      opacity: 0;
      transform: translateY(16px);
      transition: opacity 1000ms ease, transform 1000ms ease;
    }
    #question.show {
      opacity: 1;
      transform: translateY(0);
    }

.buttons {
      display: flex;
      gap: 14px;
      justify-content: center;
      flex-wrap: wrap;
    }

    .btn {
      border: none;
      padding: 12px 22px;
      font-size: 18px;
      border-radius: 14px;
      cursor: pointer;
      box-shadow: 0 8px 18px rgba(0,0,0,0.25);
      user-select: none;
    }
    .btn:active { transform: scale(0.98); }

    .btn.yes { background: #22c55e; color: #06210f; }
    .btn.no  { background: #ef4444; color: #2b0707; }

    .btn.no.slippery {
      position: fixed;
      z-index: 9999;
      transition: left 0.08s linear, top 0.08s linear;
    }

    .yes-grid .yes-item img{
      width: 100%;
      height: auto;
      display: block;
      border-radius: 14px;
      object-fit: cover;
      box-shadow: 0 10px 22px rgba(0,0,0,0.25);
    }

    /* Desktop/Laptop: show ONLY first 3 images */
    .yes-grid .yes-item:nth-child(n+4){ display: none !important; }

    /* Mobile: 2x2 grid, show ONLY first 4 images */
    @media (max-width: 900px){
      .yes-grid{ grid-template-columns: repeat(2, minmax(0, 1fr)); 
      overflow: visible;
    }
      .yes-grid .yes-item:nth-child(n+5){ display: none !important; }
      .yes-grid .yes-item:nth-child(-n+4){ display: block !important; }
    }
.yes-grid .yes-item:nth-child(4){ display: block; }
    }
  
    .yes-grid .yes-item img{
      width: 100%;
      height: auto;
      display: block;
      border-radius: 14px;
      object-fit: cover;
      box-shadow: 0 10px 22px rgba(0,0,0,0.25);
    }

    /* Desktop/Laptop: show ONLY first 3 images */
    .yes-grid .yes-item:nth-child(n+4){
      display: none !important;
    }

    /* Mobile: show ONLY first 2 images */
    @media (max-width: 900px){
      .yes-grid{
        grid-template-columns: repeat(2, minmax(0, 1fr));
      
      overflow: visible;
    }
      .yes-grid .yes-item:nth-child(n+3){
        display: none !important;
      }
      .yes-grid .yes-item:nth-child(-n+2){
        display: block !important;
      }
    }

  
    .yes-grid .yes-item img{
      width: 100%;
      height: auto;
      display: block;
      border-radius: 14px;
      object-fit: cover;
      box-shadow: 0 10px 22px rgba(0,0,0,0.25);
    }

    /* Desktop/Laptop: show ONLY first 3 images */
    .yes-grid .yes-item:nth-child(n+4){
      display: none !important;
    }

    /* Mobile: show ONLY first 2 images, stacked */
    @media (max-width: 900px){
      .yes-grid{
        grid-template-columns: 1fr; /* 1 column = 2 rows */
      
      overflow: visible;
    }
      .yes-grid .yes-item:nth-child(n+3){
        display: none !important;
      }
      .yes-grid .yes-item:nth-child(-n+2){
        display: block !important;
      }
    }

  
    /* üîπ NEW: YES collage is ALWAYS 2x2 (desktop + mobile) */
    .yes-grid{
      display: grid;
      gap: 14px;
      justify-content: center;
      align-items: stretch;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      max-width: min(900px, 94vw);
      margin: 40px auto 0;
    
      overflow: visible;
    }

    .yes-grid .yes-item img{
      width: 100%;
      height: 100%;
      display: block;
      border-radius: 14px;
      object-fit: cover;
      aspect-ratio: 1 / 1; /* keeps tiles neat */
      box-shadow: 0 10px 22px rgba(0,0,0,0.25);
    }

    /* Show ONLY first 4 images everywhere */
    .yes-grid .yes-item:nth-child(n+5){
      display: none !important;
    }
  
    /* üîπ NEW: Give the "Yay" title a bit more breathing room so it doesn't feel like it's cutting the collage */
    #question.yay {
      margin-top: 28px;
      line-height: 1.15;
    }

    /* üîπ NEW: floating hearts */
    #heart-layer{
      position: fixed;
      inset: 0;
      pointer-events: none;
      z-index: 9998;
      overflow: visible;
    }
    .heart{
      position: absolute;
      bottom: -30px;
      font-size: 18px;
      opacity: 0.9;
      filter: drop-shadow(0 8px 18px rgba(0,0,0,0.25));
      animation: floatUp linear forwards;
      user-select: none;
      will-change: transform, opacity;
    }
    @keyframes floatUp{
      0%   { transform: translateY(0) translateX(0) scale(1); opacity: 0; }
      10%  { opacity: 0.95; }
      100% { transform: translateY(-120vh) translateX(var(--drift)) scale(var(--scale)); opacity: 0; }
    }

    /* Tiny sparkle pop (surprise) */
    .sparkle{
      position: absolute;
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background: rgba(255,255,255,0.9);
      pointer-events: none;
      animation: sparkle 700ms ease-out forwards;
      filter: blur(0.2px);
    }
    @keyframes sparkle{
      0% { transform: translate(0,0) scale(1); opacity: 1; }
      100% { transform: translate(var(--dx), var(--dy)) scale(0.2); opacity: 0; }
    }

  </style>
</head>

<body>
  <div id="heart-layer"></div>
  <main class="container" id="app" style="display:none">
    <div id="media-box">
      <img id="banner" src="./public/images/mid.png" alt="banner" />
      <div id="collage"></div>
    </div>

    <h1 id="question" class="question">Achu...Will you be my Valentine?üíñ</h1>

    <div class="buttons">
      <button id="yes" class="btn yes" type="button">Yes</button>
      <button id="no" class="btn no" type="button">No</button>
    </div>
  </main>

  <audio id="bg-music" loop>
    <source src="./public/images/Gh.mp3" type="audio/mpeg">
  </audio>

  <script>
    const PASSWORD = "10MAY2000";

    (function () {
      let tries = 0;
      while (tries < 3) {
        const entered = prompt("Enter password to view this page:");
        if (entered === null) { document.body.innerHTML = ""; return; }
        if (entered === PASSWORD) {
          document.getElementById("app").style.display = "grid";
          

          // üîπ NEW: show the question only after the banner image loads (with a short delay)
          const bannerImg = document.getElementById("banner");
          const questionEl = document.getElementById("question");
          const revealQuestion = () => setTimeout(() => questionEl.classList.add("show"), 800);

          if (bannerImg.complete) {
            revealQuestion();
          } else {
            bannerImg.addEventListener("load", revealQuestion, { once: true });
            bannerImg.addEventListener("error", revealQuestion, { once: true });
          }
return;
        }
        alert("Wrong password");
        tries++;
      }
      document.body.innerHTML = "";
    })();

    const yesBtn = document.getElementById("yes");
    const noBtn = document.getElementById("no");
    const banner = document.getElementById("banner");
    const collage = document.getElementById("collage");
    const question = document.getElementById("question");
    const mediaBox = document.getElementById("media-box");
    const music = document.getElementById("bg-music");

    const NO_STYLE = {
      fontSize: getComputedStyle(noBtn).fontSize,
      padding: getComputedStyle(noBtn).padding
    };

    function lockNoSize() {
      noBtn.style.fontSize = NO_STYLE.fontSize;
      noBtn.style.padding = NO_STYLE.padding;
    }
    lockNoSize();

    function growYesOnly() {
      const size = parseFloat(getComputedStyle(yesBtn).fontSize) || 18;
      yesBtn.style.fontSize = (size + 6) + "px";
    }

    function updateBannerOnNo(count) {
      if (count >= 1 && count <= 5) {
        banner.src = `./public/images/No${count}.png`;
      }
    }

    const TOTAL_IMAGES = 29;
    const INTERVAL = 6000;
    let shown = new Set();

    function rand(min, max) {
      return Math.floor(Math.random() * (max - min + 1)) + min;
    }

    

    // üîπ NEW: Hearts + sparkles surprise on YES
    const heartLayer = document.getElementById("heart-layer");

    function spawnHeartBurst(count = 28) {
      for (let i = 0; i < count; i++) {
        const h = document.createElement("div");
        h.className = "heart";
        h.textContent = ["üíñ","üíó","üíò","üíù","üíï","‚ù§Ô∏è"][rand(0,5)];
        const size = rand(14, 34);
        const left = rand(0, window.innerWidth);
        const dur = rand(2400, 5200) / 1000;
        const drift = rand(-120, 120) + "px";
        const scale = (rand(70, 140) / 100).toFixed(2);

        h.style.left = left + "px";
        h.style.fontSize = size + "px";
        h.style.animationDuration = dur + "s";
        h.style.setProperty("--drift", drift);
        h.style.setProperty("--scale", scale);

        heartLayer.appendChild(h);
        setTimeout(() => h.remove(), dur * 1000 + 200);
      }
    }

    function sparkleAt(x, y, count = 18) {
      for (let i = 0; i < count; i++) {
        const s = document.createElement("div");
        s.className = "sparkle";
        s.style.left = x + "px";
        s.style.top = y + "px";
        s.style.setProperty("--dx", rand(-80, 80) + "px");
        s.style.setProperty("--dy", rand(-80, 80) + "px");
        heartLayer.appendChild(s);
        setTimeout(() => s.remove(), 750);
      }
    }

    function startHeartsRain(ms = 4500) {
      const t0 = Date.now();
      const timer = setInterval(() => {
        spawnHeartBurst(rand(6, 10));
        if (Date.now() - t0 > ms) clearInterval(timer);
      }, 260);
    }

function imgPath(n) {
      return `./public/images/${n}.PNG`;
    }

    function renderInitialCollage() {
      collage.innerHTML = "";
      shown.clear();
      for (let i = 0; i < 6; i++) {
        let n;
        do { n = rand(1, TOTAL_IMAGES); } while (shown.has(n));
        shown.add(n);
        const img = document.createElement("img");
        img.dataset.num = n;
        img.src = imgPath(n);
        collage.appendChild(img);
      }
    }

    function swapOneTile() {
      const imgs = collage.querySelectorAll("img");
      if (!imgs.length) return;
      const target = imgs[rand(0, imgs.length - 1)];
      const oldNum = Number(target.dataset.num);
      let newNum;
      do { newNum = rand(1, TOTAL_IMAGES); } while (shown.has(newNum));
      shown.delete(oldNum);
      shown.add(newNum);
      target.style.opacity = 0;
      setTimeout(() => {
        target.dataset.num = newNum;
        target.src = imgPath(newNum);
        target.style.opacity = 1;
      }, 300);
    }

    function startCollage() {
      mediaBox.classList.add("big");
      banner.style.display = "none";
      collage.style.display = "grid";
      renderInitialCollage();
      setInterval(swapOneTile, INTERVAL);
    }

    let noCount = 0;
    const noTexts = [
      "Haaaw! Why Not? Huh!?üòß",
      "Like Reaaaaly Sure?ü•∫",
      "They are not happy ketto!!üò°",
      "Why would you ever want to see them Sadüò≠",
      "Oho! Anna try clicking NO nowüòù"
    ];

    function moveNoAnywhere() {
      lockNoSize();
      const pad = 12;
      const r = noBtn.getBoundingClientRect();
      noBtn.style.left = rand(pad, window.innerWidth - r.width - pad) + "px";
      noBtn.style.top  = rand(pad, window.innerHeight - r.height - pad) + "px";
    }

    function enableSlipperyNo() {
      noBtn.classList.add("slippery");
      moveNoAnywhere();
      noBtn.addEventListener("mouseenter", moveNoAnywhere);
      noBtn.addEventListener("mousedown", e => {
        e.preventDefault();
        moveNoAnywhere();
      });
    }

    noBtn.addEventListener("click", () => {
      noCount++;
      growYesOnly();
      lockNoSize();
      if (noCount <= 5) {
        noBtn.textContent = noTexts[noCount - 1];
        updateBannerOnNo(noCount);
      }
      if (noCount >= 5) enableSlipperyNo();
    });

    yesBtn.addEventListener("click", () => {
      if (!confirm("Are you sure you‚Äôre ready for this? Because there will be times when we don‚Äôt see things the same way, when our opinions differ, and when we may disagree on everything and almost end up killing each otherü§£. I just want you to know that I‚Äôll always be there for you!‚ù§Ô∏è ")) return;

      music.volume = 0.6;
      music.play();

      question.textContent = "Thank you for making me the happiest man in this world! I know you don't like cringe dialogues, so let me end by just saying... I love you Achu!‚ù§Ô∏è";
      
      question.classList.add("yay");
      spawnHeartBurst(40);
      startHeartsRain(5200);
      try {
        const r = yesBtn.getBoundingClientRect();
        sparkleAt(r.left + r.width/2, r.top + r.height/2, 22);
      } catch(e) {}
startCollage();
      yesBtn.style.display = "none";
      noBtn.style.display = "none";
    });
  </script>
</body>
</html>
